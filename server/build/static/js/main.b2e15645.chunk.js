(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var a,s=n(2),r=n(0),c=n(8),i=n.n(c),o=n(32),l=n(11),u=n(27),j=n.n(u),d=n(35),b=n(13),m=n(234),h=n(237),p=n(239),O=n(240),g=n(50),x=n.n(g),f={userLogin:function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=(n(79),Object(m.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"30ch"}}}))),A=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(b.a)(c,2),l=i[0],u=i[1],m=Object(r.useState)(null),g=Object(b.a)(m,2),x=g[0],A=g[1],w=Object(r.useState)(""),N=Object(b.a)(w,2),y=N[0],S=N[1],C=v(),k={WebkitBoxShadow:"0 0 0 1000px #6ddaf5 inset"},I=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=1,t.preventDefault(),e.next=4,f.userLogin({username:n,password:l}).catch((function(e){window.alert(e.response.data.error),a=0}));case 4:s=e.sent,1===a&&(window.alert("Login successful!"),window.localStorage.setItem("loggedChatAppUser",s.token),A(s.token));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"joinOuterContainer",children:Object(s.jsxs)("div",{className:"joinInnerContainer",children:[Object(s.jsxs)("h1",{className:"heading1",children:["Shall We Talk!",Object(s.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\udcac"})]}),Object(s.jsx)("h1",{className:"heading",children:"LOGIN"}),Object(s.jsxs)(h.a,{children:[Object(s.jsxs)("form",{onSubmit:I,children:[Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Username",placeholder:"username",variant:"outlined",margin:"normal",value:n,type:"text",color:"primary",className:C.textField,inputProps:{style:k},required:!0,onChange:function(e){a(e.target.value)}})}),Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Password",placeholder:"password",variant:"outlined",margin:"normal",value:l,type:"password",color:"primary",className:C.textField,inputProps:{style:k},required:!0,onChange:function(e){u(e.target.value)}})}),Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Room",placeholder:"room",variant:"outlined",margin:"normal",value:y,type:"text",color:"primary",className:C.textField,inputProps:{style:k},required:!0,onChange:function(e){S(e.target.value)}})}),Object(s.jsx)("p",{}),Object(s.jsx)("div",{children:Object(s.jsx)(o.b,{onClick:function(e){return n&&y&&l?null===x?I(e):null:e.preventDefault()},to:"/chat?username=".concat(n,"&token=").concat(x,"&room=").concat(y),children:null===x?Object(s.jsx)(O.a,{className:"button",variant:"contained",color:"primary",id:"login-button",type:"submit",size:"large",children:"Login"}):Object(s.jsx)(O.a,{variant:"contained",color:"primary",id:"login-button",type:"submit",size:"large",children:"Start chatting"})})})]}),Object(s.jsx)("p",{}),Object(s.jsx)("div",{children:Object(s.jsx)(o.b,{to:"/signup",children:Object(s.jsx)(O.a,{className:"button",variant:"contained",color:"primary",id:"go-signup-button",size:"large",children:"Go Signup"})})})]})]})})},w=n(110),N=n(107),y=n.n(N),S=n(108),C=n.n(S),k=(n(178),n(179),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="),I=function(e){var t=e.room,n=e.setToken,a=e.disconnected;return Object(s.jsxs)("div",{className:"infoBar",children:[Object(s.jsxs)("div",{className:"leftInnerContainer",children:[Object(s.jsx)("img",{className:"onlineIcon",src:k,alt:"onlineimage"}),Object(s.jsx)("h3",{children:t})]}),Object(s.jsx)("div",{className:"rightInnerContainer",children:Object(s.jsx)("a",{href:"/",onClick:function(){return n(null),localStorage.clear(),void a()},children:Object(s.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=",alt:"closeimage"})})})]})},U=(n(180),function(e){var t=e.message,n=e.setMessage,a=e.sendMessage;return Object(s.jsxs)("form",{className:"form",children:[Object(s.jsx)("input",{className:"input",type:"text",placeholder:"Type your message...",value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}}),Object(s.jsx)("button",{className:"sendButton",onClick:function(e){return a(e)},children:"Send"})]})}),P=(n(181),n(109)),R=n.n(P),B=(n(203),n(68)),E=n.n(B),L=function(e){var t=e.message,n=t.user,a=t.text,r=!1,c=e.username.trim().toLowerCase();return n===c&&(r=!0),r?Object(s.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(s.jsx)("p",{className:"sentText pr-10",children:c}),Object(s.jsx)("div",{className:"messageBox backgroundBlue",children:Object(s.jsx)("p",{className:"messageText colorWhite",children:E.a.emojify(a)})})]}):Object(s.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(s.jsx)("div",{className:"messageBox backgroundLight",children:Object(s.jsx)("p",{className:"messageText colorDark",children:E.a.emojify(a)})}),Object(s.jsx)("p",{className:"sentText pl-10",children:n})]})},F=function(e){var t=e.messages,n=e.username;return Object(s.jsx)(R.a,{className:"messages",children:t.map((function(e,t){return Object(s.jsx)("div",{children:Object(s.jsx)(L,{message:e,username:n})},t)}))})},M=(n(204),function(e){var t=e.users;return Object(s.jsxs)("div",{className:"userContainer",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("h1",{children:["Shall We Talk!",Object(s.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\udcac"})]})}),t?Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"People currently chatting:"}),Object(s.jsx)("div",{className:"activeContainer",children:Object(s.jsx)("h2",{children:t.map((function(e){var t=e.id,n=e.username;return Object(s.jsxs)("div",{className:"activeItem",children:[n,Object(s.jsx)("img",{alt:"Online Icon",src:k})]},t)}))})})]}):null]})}),T=function(e){var t=e.location,n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],o=c[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),j=u[0],d=u[1],m=Object(r.useState)(""),h=Object(b.a)(m,2),p=h[0],O=h[1],g=Object(r.useState)([]),x=Object(b.a)(g,2),f=x[0],v=x[1],A=Object(r.useState)([]),N=Object(b.a)(A,2),S=N[0],k=N[1],P=Object(r.useState)(null),R=Object(b.a)(P,2),B=(R[0],R[1]),E="https://chatapp-shallwetalk.herokuapp.com/";Object(r.useEffect)((function(){var e=y.a.parse(t.search),n=e.username,s=e.room;a=C()(E),o(n),d(s),a.emit("join",{username:n,room:s},(function(e){e&&alert(e)}))}),[E,t.search]);window.onbeforeunload=function(){return a.emit("disconnected"),a.off(),"refreshing/leaving this page?"},window.onhashchange=function(){return a.emit("disconnected"),a.off(),"refreshing/leaving this page?"},Object(r.useEffect)((function(){a.on("message",(function(e){k([].concat(Object(w.a)(S),[e]))})),a.on("roomData",(function(e){var t=e.users;O(t)}))}),[S,p]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedChatAppUser");e&&B(e)}),[]);return Object(s.jsxs)("div",{className:"outerContainer",children:[Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(I,{room:j,setToken:B,disconnected:function(){a.emit("disconnected"),a.off()}}),Object(s.jsx)(F,{messages:S,username:i}),Object(s.jsx)(U,{message:f,setMessage:v,sendMessage:function(e){e.preventDefault(),f&&a.emit("sendMessage",f,(function(){return v("")}))}})]}),Object(s.jsx)(M,{users:p})]})},W={createUser:function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q=Object(m.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"30ch"}}})),D=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(b.a)(c,2),l=i[0],u=i[1],j=Object(r.useState)(""),d=Object(b.a)(j,2),m=d[0],g=d[1],x=q(),f={WebkitBoxShadow:"0 0 0 1000px #6ddaf5 inset"};return Object(s.jsx)("div",{className:"joinOuterContainer",children:Object(s.jsxs)("div",{className:"joinInnerContainer",children:[Object(s.jsxs)("h1",{className:"heading1",children:["Shall We Talk?",Object(s.jsx)("span",{role:"img","aria-label":"emoji",children:"\ud83d\udcac"})]}),Object(s.jsx)("h1",{className:"heading",children:"Sign Up"}),Object(s.jsx)(h.a,{children:Object(s.jsxs)("form",{onSubmit:function(e){var t=1;e.preventDefault(),l===m?W.createUser({username:n,password:l}).catch((function(e){window.alert(e.response.data.error),console.log(1),t=0})).finally((function(){1===t&&window.alert("Sign up successful, go login!")})):window.alert("Passwords did not match, please check again!"),a(""),u(""),g("")},children:[Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Username",placeholder:"username",variant:"outlined",margin:"normal",value:n,type:"text",color:"primary",className:x.textField,inputProps:{style:f},required:!0,onChange:function(e){a(e.target.value)}})}),Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Password",placeholder:"password",variant:"outlined",margin:"normal",value:l,type:"password",color:"primary",className:x.textField,inputProps:{style:f},required:!0,onChange:function(e){u(e.target.value)}})}),Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{label:"Verify password",placeholder:"verify password",variant:"outlined",margin:"normal",value:m,type:"password",color:"primary",className:x.textField,inputProps:{style:f},required:!0,onChange:function(e){g(e.target.value)}})}),Object(s.jsx)("p",{}),Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{className:"button",variant:"contained",color:"primary",id:"signup-button",type:"submit",size:"large",children:"Sign up"})}),Object(s.jsx)("p",{}),Object(s.jsx)("div",{children:Object(s.jsx)(o.b,{to:"/",children:Object(s.jsx)(O.a,{className:"button",variant:"contained",color:"primary",id:"go-signin-button",type:"submit",size:"large",children:"Go Login"})})})]})})]})})},G=function(){return Object(s.jsxs)(o.a,{children:[Object(s.jsx)(l.a,{path:"/signup",component:D}),Object(s.jsx)(l.a,{path:"/",exact:!0,component:A}),Object(s.jsx)(l.a,{path:"/chat",component:T})]})};i.a.render(Object(s.jsx)(G,{}),document.querySelector("#root"))},79:function(e,t,n){}},[[205,1,2]]]);
//# sourceMappingURL=main.b2e15645.chunk.js.map